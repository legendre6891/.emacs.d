<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Emacs Configuration</title>
<!-- 2015-08-20 Thu 11:23 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Kevin Li" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Emacs Configuration</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Prelude</a></li>
<li><a href="#sec-2">2. Package Setup</a></li>
<li><a href="#sec-3">3. General Settings</a>
<ul>
<li><a href="#sec-3-1">3.1. The Custom File</a></li>
<li><a href="#sec-3-2">3.2. Home and Dropbox Folder setup</a></li>
<li><a href="#sec-3-3">3.3. General Settings</a>
<ul>
<li><a href="#sec-3-3-1">3.3.1. Better Defaults</a></li>
<li><a href="#sec-3-3-2">3.3.2. Visuals</a></li>
<li><a href="#sec-3-3-3">3.3.3. Tab Settings</a></li>
<li><a href="#sec-3-3-4">3.3.4. Miscellaneous</a></li>
</ul>
</li>
<li><a href="#sec-3-4">3.4. Ido, Recentf, and Smex</a>
<ul>
<li><a href="#sec-3-4-1">3.4.1. General settings</a></li>
<li><a href="#sec-3-4-2">3.4.2. Ido everywhere</a></li>
<li><a href="#sec-3-4-3">3.4.3. Recentf</a></li>
<li><a href="#sec-3-4-4">3.4.4. Smex</a></li>
</ul>
</li>
<li><a href="#sec-3-5">3.5. Mac OS X specific settings</a></li>
</ul>
</li>
<li><a href="#sec-4">4. Look and Feel</a>
<ul>
<li><a href="#sec-4-1">4.1. Themes</a>
<ul>
<li><a href="#sec-4-1-1">4.1.1. Activate theme</a></li>
</ul>
</li>
<li><a href="#sec-4-2">4.2. Fonts</a>
<ul>
<li><a href="#sec-4-2-1">4.2.1. Activating a font</a></li>
<li><a href="#sec-4-2-2">4.2.2. <span class="todo TODO">TODO</span> cycle between fonts</a></li>
<li><a href="#sec-4-2-3">4.2.3. <span class="todo TODO">TODO</span> Check whether the font exists</a></li>
</ul>
</li>
<li><a href="#sec-4-3">4.3. Smart Mode Line</a>
<ul>
<li><a href="#sec-4-3-1">4.3.1. <span class="todo TODO">TODO</span> Investigate this more and make it more functional</a></li>
</ul>
</li>
<li><a href="#sec-4-4">4.4. Line Numbers</a></li>
</ul>
</li>
<li><a href="#sec-5">5. Evil Mode</a>
<ul>
<li><a href="#sec-5-1">5.1. <span class="todo TODO">TODO</span> Include evil mode stuff</a></li>
</ul>
</li>
<li><a href="#sec-6">6. Yasnippet</a>
<ul>
<li><a href="#sec-6-1">6.1. <span class="todo TODO">TODO</span> Add different folders for different modes of snippet files</a></li>
<li><a href="#sec-6-2">6.2. <span class="todo TODO">TODO</span> Add a shortcut for visiting snippet</a></li>
<li><a href="#sec-6-3">6.3. <span class="todo TODO">TODO</span> Add a shortcut for creating a snippet.</a></li>
</ul>
</li>
<li><a href="#sec-7">7. Smartparens</a></li>
<li><a href="#sec-8">8. Org Mode</a>
<ul>
<li><a href="#sec-8-1">8.1. Appearance</a></li>
<li><a href="#sec-8-2">8.2. Editing features</a></li>
<li><a href="#sec-8-3">8.3. Directory structure</a></li>
<li><a href="#sec-8-4">8.4. Custom key binds</a></li>
<li><a href="#sec-8-5">8.5. Support for LaTeX in Org</a>
<ul>
<li><a href="#sec-8-5-1">8.5.1. Inside Org Mode</a></li>
<li><a href="#sec-8-5-2">8.5.2. Exporting to LaTeX</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-9">9. Emacs-Lisp</a></li>
<li><a href="#sec-10">10. LaTeX</a></li>
<li><a href="#sec-11">11. Clojure</a></li>
<li><a href="#sec-12">12. Epilog</a></li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Prelude</h2>
<div class="outline-text-2" id="text-1">
<p>
This file is tangled and loaded via <code>init.el</code>, which
should just contain the following.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #F9D339; font-weight: bold;">require</span> '<span style="color: #F77669;">org</span>)
(org-babel-load-file
 (expand-file-name
  <span style="color: #74CBC4;">"my-init.org"</span>
  (concat user-emacs-directory <span style="color: #74CBC4;">"org"</span>
   )))
</pre>
</div>
</div>
</div>



<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Package Setup</h2>
<div class="outline-text-2" id="text-2">
<p>
Most of the settings rely on installing packages. So the first
order of business is to initialize the package system.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #546D7A;">;; </span><span style="color: #546D7A;">so we don't get bothered about coding system</span>
(prefer-coding-system 'utf-8) 

(<span style="color: #F9D339; font-weight: bold;">require</span> '<span style="color: #F77669;">package</span>)
(setq package-enable-at-startup nil)
(add-to-list 'package-archives '(<span style="color: #74CBC4;">"melpa"</span> .
                                 <span style="color: #74CBC4;">"http://melpa.org/packages/"</span>))
(package-initialize)
</pre>
</div>
<p>
Next, we pull in the conveninence package <code>use-package</code>,
which is used to actually configure the packages
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #546D7A;">;; </span><span style="color: #546D7A;">Bootstrap `</span><span style="color: #F77669;">use-package</span><span style="color: #546D7A;">'</span>
(<span style="color: #F9D339; font-weight: bold;">unless</span> (package-installed-p 'use-package)
  (package-refresh-contents)
  (package-install 'use-package))
(<span style="color: #F9D339; font-weight: bold;">require</span> '<span style="color: #F77669;">use-package</span>)
</pre>
</div>
</div>
</div>



<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> General Settings</h2>
<div class="outline-text-2" id="text-3">
<p>
These following settings should always be on, and depends
only on an up-to-date Emacs installation. They try to
provide a comfortable experience for debugging init files
in the case that the rest of the things somehow break.
</p>
</div>
<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> The Custom File</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Don't litter <code>init.el</code> with customizations with <code>Customize</code>.
Create an empty file for it, in case it is not present.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq custom-file <span style="color: #74CBC4;">"~/.emacs.d/emacs-custom.el"</span>)
(<span style="color: #F9D339; font-weight: bold;">if</span> (not (file-exists-p custom-file))
    (write-region <span style="color: #74CBC4;">""</span> nil custom-file))

(load custom-file)
</pre>
</div>

<p>
The <code>custom-file</code> is not kept under version control, so it is
convenient to put some personal settings in there that shouldn't be
seen on Github.  
</p>

<p>
The following function takes in a symbol and a
prompt; if the symbol isn't defined at this point (after the custom
file's loaded), then prompt the user for its value. Afterwards, put in the
custom file so it needn't be asked again.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #F9D339; font-weight: bold;">defun</span> <span style="color: #FF516D;">ensure-in-custom</span> (SYM PROMPT)
  (interactive)
  (<span style="color: #F9D339; font-weight: bold;">if</span> (not (boundp SYM))
      (<span style="color: #F9D339; font-weight: bold;">let*</span> ((entry (read-from-minibuffer PROMPT))
             (symbol (symbol-name SYM))
             (piece `(setq ,SYM ,entry)))
        (eval piece)
        (write-region (concat (prin1-to-string piece) <span style="color: #74CBC4;">"\n"</span>)
         nil custom-file 'append)
        )))
</pre>
</div>
<p>
Now make sure that our full name and email address are always defined.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(ensure-in-custom 'user-full-name <span style="color: #74CBC4;">"Enter your full name: "</span>)
(ensure-in-custom 'email-address <span style="color: #74CBC4;">"Enter your email address: "</span>)
</pre>
</div>
</div>
</div>


<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> Home and Dropbox Folder setup</h3>
<div class="outline-text-3" id="text-3-2">
<p>
It is convenient to know where my "home" folder is (not the folder
that Emacs thinks is home), and also where the Dropbox folder
is. Later, we may define some shortcuts using these constants.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq user-home-folder
      (file-name-as-directory
       <span style="color: #546D7A;">;; </span><span style="color: #546D7A;">Windows doesn't use the ~ convention</span>
       (<span style="color: #F9D339; font-weight: bold;">if</span> (eq system-type 'windows-nt)
           (substitute-in-file-name <span style="color: #74CBC4;">"$HOMEDRIVE$HOMEPATH"</span>)
           <span style="color: #74CBC4;">"~"</span>)))

(setq user-dropbox-folder
      (file-name-as-directory
       (concat user-home-folder <span style="color: #74CBC4;">"Dropbox"</span>)))
</pre>
</div>
</div>
</div>


<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> General Settings</h3>
<div class="outline-text-3" id="text-3-3">
<p>
These settings should always be present.
</p>
</div>
<div id="outline-container-sec-3-3-1" class="outline-4">
<h4 id="sec-3-3-1"><span class="section-number-4">3.3.1</span> Better Defaults</h4>
<div class="outline-text-4" id="text-3-3-1">
<p>
A no-frills package to set some sensible defaults.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #F9D339; font-weight: bold;">use-package</span> <span style="color: #F77669;">better-defaults</span>
    <span style="color: #CDD3D3; font-weight: bold;">:ensure</span> t)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-3-2" class="outline-4">
<h4 id="sec-3-3-2"><span class="section-number-4">3.3.2</span> Visuals</h4>
<div class="outline-text-4" id="text-3-3-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq ring-bell-function 'ignore)
(setq inhibit-startup-message t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-3-3" class="outline-4">
<h4 id="sec-3-3-3"><span class="section-number-4">3.3.3</span> Tab Settings</h4>
<div class="outline-text-4" id="text-3-3-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq-default tab-width 4)
(<span style="color: #F9D339; font-weight: bold;">defvaralias</span> '<span style="color: #C2E982;">c-basic-offset</span> 'tab-width)
(<span style="color: #F9D339; font-weight: bold;">defvaralias</span> '<span style="color: #C2E982;">cperl-indent-level</span> 'tab-width)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-3-4" class="outline-4">
<h4 id="sec-3-3-4"><span class="section-number-4">3.3.4</span> Miscellaneous</h4>
<div class="outline-text-4" id="text-3-3-4">
<p>
Always show column numbers
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(column-number-mode t)
</pre>
</div>

<p>
Never make me type <code>yes</code> or <code>no</code>.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #F9D339; font-weight: bold;">defalias</span> '<span style="color: #FF516D;">yes-or-no-p</span> 'y-or-n-p)
</pre>
</div>

<p>
Easier navigation with mark ring.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq set-mark-command-repeat-pop t)
</pre>
</div>

<p>
Don't garbage collect so much.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq gc-cons-threshold (* 1024 1024 50))
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4"><span class="section-number-3">3.4</span> Ido, Recentf, and Smex</h3>
<div class="outline-text-3" id="text-3-4">
</div><div id="outline-container-sec-3-4-1" class="outline-4">
<h4 id="sec-3-4-1"><span class="section-number-4">3.4.1</span> General settings</h4>
<div class="outline-text-4" id="text-3-4-1">
<p>
Ido is one of the reasons why Emacs is great! It takes a little bit of
setting up to make it more comfortable to use.
</p>

<p>
Enable virtual buffers: even if a buffer is closed, we still have
access to it.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq ido-use-virtual-buffers t)
</pre>
</div>

<p>
When a filename doesn't complete, ido will search recently used
names. This is annoying, so disable it.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq ido-auto-merge-work-directories-length -1)
</pre>
</div>

<p>
<code>Flx Ido</code> uses another algorithm to calculate matches which seems to
work better than the default.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #F9D339; font-weight: bold;">use-package</span> <span style="color: #F77669;">flx-ido</span>
    <span style="color: #CDD3D3; font-weight: bold;">:ensure</span> t
    <span style="color: #CDD3D3; font-weight: bold;">:config</span> (flx-ido-mode 1))
</pre>
</div>

<p>
Make the completion interface vertical; it is more legible this way.
In addition, define up and down keys, because <code>&lt;left&gt;</code> and <code>&lt;right&gt;</code>
arrows are too inconvenient.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #F9D339; font-weight: bold;">use-package</span> <span style="color: #F77669;">ido-vertical-mode</span>
    <span style="color: #CDD3D3; font-weight: bold;">:ensure</span> t
    <span style="color: #CDD3D3; font-weight: bold;">:config</span>
    (<span style="color: #F9D339; font-weight: bold;">progn</span>
      (ido-vertical-mode 1)
      (<span style="color: #F9D339; font-weight: bold;">defun</span> <span style="color: #FF516D;">ido-define-keys</span> () <span style="color: #546D7A;">;; </span><span style="color: #546D7A;">C-n/p is more intuitive in vertical layout</span>
        (define-key ido-completion-map (kbd <span style="color: #74CBC4;">"C-n"</span>) 'ido-next-match)
        (define-key ido-completion-map (kbd <span style="color: #74CBC4;">"C-j"</span>) 'ido-next-match)
        (define-key ido-completion-map (kbd <span style="color: #74CBC4;">"C-k"</span>) 'ido-prev-match)
        (define-key ido-completion-map (kbd <span style="color: #74CBC4;">"C-p"</span>) 'ido-prev-match))
      (add-hook 'ido-setup-hook 'ido-define-keys)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-4-2" class="outline-4">
<h4 id="sec-3-4-2"><span class="section-number-4">3.4.2</span> Ido everywhere</h4>
<div class="outline-text-4" id="text-3-4-2">
<p>
Use Ido for most completions; sadly this doesn't quite cover 100% of
the cases yet, but it's close.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(ido-everywhere)
(<span style="color: #F9D339; font-weight: bold;">use-package</span> <span style="color: #F77669;">ido-ubiquitous</span>
    <span style="color: #CDD3D3; font-weight: bold;">:ensure</span> t
    <span style="color: #CDD3D3; font-weight: bold;">:init</span>
    (<span style="color: #F9D339; font-weight: bold;">progn</span>
      (ido-ubiquitous-mode 1)
      (<span style="color: #F9D339; font-weight: bold;">defmacro</span> <span style="color: #FF516D;">ido-ubiquitous-use-new-completing-read</span> (cmd package)
        `(eval-after-load ,package
           '(<span style="color: #F9D339; font-weight: bold;">defadvice</span> ,cmd (around ido-ubiquitous-new activate)
             (<span style="color: #F9D339; font-weight: bold;">let</span> ((ido-ubiquitous-enable-compatibility nil))
               ad-do-it)))))
    <span style="color: #CDD3D3; font-weight: bold;">:config</span>
    (<span style="color: #F9D339; font-weight: bold;">progn</span>
      (ido-ubiquitous-use-new-completing-read yas/expand 'yasnippet)
      (ido-ubiquitous-use-new-completing-read yas/visit-snippet-file 'yasnippet)))
</pre>
</div>
<p>
The last two lines are used to make make completing with <code>yasnippet</code>
work well.
</p>
</div>

<ol class="org-ol"><li><a id="sec-3-4-2-1" name="sec-3-4-2-1"></a><span class="todo TODO">TODO</span> Investigate Helm?<br  /></li></ol>
</div>

<div id="outline-container-sec-3-4-3" class="outline-4">
<h4 id="sec-3-4-3"><span class="section-number-4">3.4.3</span> Recentf</h4>
<div class="outline-text-4" id="text-3-4-3">
<p>
Recentf supports Ido mode by keeping track of recently organized files.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #F9D339; font-weight: bold;">use-package</span> <span style="color: #F77669;">recentf</span>
    <span style="color: #CDD3D3; font-weight: bold;">:config</span>
  (<span style="color: #F9D339; font-weight: bold;">progn</span>
    (recentf-mode 1)
    (setq recentf-max-menu-items 500)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-4-4" class="outline-4">
<h4 id="sec-3-4-4"><span class="section-number-4">3.4.4</span> Smex</h4>
<div class="outline-text-4" id="text-3-4-4">
<p>
<code>M-x</code> support but for ido.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #F9D339; font-weight: bold;">use-package</span> <span style="color: #F77669;">smex</span>
    <span style="color: #CDD3D3; font-weight: bold;">:ensure</span> t
    <span style="color: #CDD3D3; font-weight: bold;">:bind</span>
    ((<span style="color: #74CBC4;">"M-x"</span> . smex)
     (<span style="color: #74CBC4;">"C-x C-m"</span> . smex)
     (<span style="color: #74CBC4;">"C-c C-m"</span> . smex)
     (<span style="color: #74CBC4;">"C-c m"</span> . smex)
     (<span style="color: #74CBC4;">"C-x m"</span> . smex)))
</pre>
</div>
</div>
</div>
</div>



<div id="outline-container-sec-3-5" class="outline-3">
<h3 id="sec-3-5"><span class="section-number-3">3.5</span> Mac OS X specific settings</h3>
<div class="outline-text-3" id="text-3-5">
<p>
We need let Emacs know about the the <code>LaTeX</code> path
for <code>LaTeX</code> to work.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #F9D339; font-weight: bold;">if</span> (eq system-type 'darwin)
    (<span style="color: #F9D339; font-weight: bold;">progn</span>
      (<span style="color: #F9D339; font-weight: bold;">defun</span> <span style="color: #FF516D;">set-exec-path-from-shell-PATH</span> ()
        (<span style="color: #F9D339; font-weight: bold;">let</span> ((path-from-shell
               (shell-command-to-string
                <span style="color: #74CBC4;">"TERM=vt100 $SHELL -i -c 'echo $PATH'"</span>)))

          (setenv <span style="color: #74CBC4;">"PATH"</span> path-from-shell)
          (setq exec-path (split-string path-from-shell path-separator))))

      (<span style="color: #F9D339; font-weight: bold;">when</span> window-system (set-exec-path-from-shell-PATH))

      (getenv <span style="color: #74CBC4;">"PATH"</span>)
      (setenv <span style="color: #74CBC4;">"PATH"</span> (concat <span style="color: #74CBC4;">"/usr/texbin"</span> <span style="color: #74CBC4;">":"</span> (getenv <span style="color: #74CBC4;">"PATH"</span>)))

      (setenv <span style="color: #74CBC4;">"PATH"</span> (concat (getenv <span style="color: #74CBC4;">"PATH"</span>) <span style="color: #74CBC4;">":/usr/local/bin"</span>))
      (setq exec-path (append exec-path '(<span style="color: #74CBC4;">"/usr/local/bin"</span>)))

      (setenv <span style="color: #74CBC4;">"PATH"</span> (concat (getenv <span style="color: #74CBC4;">"PATH"</span>) <span style="color: #74CBC4;">":/usr/bin"</span>))
      (setq exec-path (append exec-path '(<span style="color: #74CBC4;">"/usr/bin"</span>)))))
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Look and Feel</h2>
<div class="outline-text-2" id="text-4">
<p>
Here, we install various themes.  Install <code>emacs24</code> themes and set up
a font. I'm not sure at this point whether to simply <i>install</i> the
themes or actually activate them.
</p>
</div>
<div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> Themes</h3>
<div class="outline-text-3" id="text-4-1">
<p>
Install but defer.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #F9D339; font-weight: bold;">use-package</span> <span style="color: #F77669;">color-theme-sanityinc-tomorrow</span>
    <span style="color: #CDD3D3; font-weight: bold;">:defer</span> t
    <span style="color: #CDD3D3; font-weight: bold;">:ensure</span> t)
(<span style="color: #F9D339; font-weight: bold;">use-package</span> <span style="color: #F77669;">ample-theme</span>
    <span style="color: #CDD3D3; font-weight: bold;">:defer</span> t
    <span style="color: #CDD3D3; font-weight: bold;">:ensure</span> t)
(<span style="color: #F9D339; font-weight: bold;">use-package</span> <span style="color: #F77669;">smyx-theme</span>
    <span style="color: #CDD3D3; font-weight: bold;">:defer</span> t
    <span style="color: #CDD3D3; font-weight: bold;">:ensure</span> t)
(<span style="color: #F9D339; font-weight: bold;">use-package</span> <span style="color: #F77669;">aurora-theme</span>
    <span style="color: #CDD3D3; font-weight: bold;">:defer</span> t
    <span style="color: #CDD3D3; font-weight: bold;">:ensure</span> t)
</pre>
</div>
</div>
<div id="outline-container-sec-4-1-1" class="outline-4">
<h4 id="sec-4-1-1"><span class="section-number-4">4.1.1</span> Activate theme</h4>
<div class="outline-text-4" id="text-4-1-1">
<p>
The <code>aurora-theme</code> is the current favorite.
The extra <code>t</code> flag is so we don't get asked about treating themes
as safe.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(load-theme 'aurora t)
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> Fonts</h3>
<div class="outline-text-3" id="text-4-2">
</div><div id="outline-container-sec-4-2-1" class="outline-4">
<h4 id="sec-4-2-1"><span class="section-number-4">4.2.1</span> Activating a font</h4>
<div class="outline-text-4" id="text-4-2-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(set-face-attribute 'default nil
                    <span style="color: #CDD3D3; font-weight: bold;">:family</span> <span style="color: #74CBC4;">"Menlo"</span>
                    <span style="color: #CDD3D3; font-weight: bold;">:height</span> 140
                    <span style="color: #CDD3D3; font-weight: bold;">:weight</span> 'normal
                    <span style="color: #CDD3D3; font-weight: bold;">:width</span> 'normal)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-2-2" class="outline-4">
<h4 id="sec-4-2-2"><span class="section-number-4">4.2.2</span> <span class="todo TODO">TODO</span> cycle between fonts</h4>
<div class="outline-text-4" id="text-4-2-2">
<p>
Write a function (a la Spacemacs) that allows me to switch between fonts.
</p>
</div>
<ol class="org-ol"><li><a id="sec-4-2-2-1" name="sec-4-2-2-1"></a>With ido support?<br  /></li></ol>
</div>

<div id="outline-container-sec-4-2-3" class="outline-4">
<h4 id="sec-4-2-3"><span class="section-number-4">4.2.3</span> <span class="todo TODO">TODO</span> Check whether the font exists</h4>
</div>
</div>


<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> Smart Mode Line</h3>
<div class="outline-text-3" id="text-4-3">
<p>
I'm actually not convined of the utility of this just yet,
but let's throw it in because it does look somewhat nicer than the
default mode line.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #F9D339; font-weight: bold;">use-package</span> <span style="color: #F77669;">smart-mode-line</span>
    <span style="color: #CDD3D3; font-weight: bold;">:ensure</span> smart-mode-line
    <span style="color: #CDD3D3; font-weight: bold;">:init</span>
    (<span style="color: #F9D339; font-weight: bold;">progn</span>
      (setq sml/theme 'light)
      (setq sml/name-width 40)
      (setq sml/mode-width 'full))
    <span style="color: #CDD3D3; font-weight: bold;">:config</span>
    (<span style="color: #F9D339; font-weight: bold;">progn</span>
      (sml/setup)))
</pre>
</div>
</div>

<div id="outline-container-sec-4-3-1" class="outline-4">
<h4 id="sec-4-3-1"><span class="section-number-4">4.3.1</span> <span class="todo TODO">TODO</span> Investigate this more and make it more functional</h4>
</div>
</div>


<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> Line Numbers</h3>
<div class="outline-text-3" id="text-4-4">
<p>
Line numbers are surprisingly clunky in Emacs, which above all
is a text editor. The <code>nlinum</code> package seems to be the best, and I
find it useful enough to enable it everywhere.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #F9D339; font-weight: bold;">use-package</span> <span style="color: #F77669;">nlinum</span>
    <span style="color: #CDD3D3; font-weight: bold;">:ensure</span> t
    <span style="color: #CDD3D3; font-weight: bold;">:init</span>
    (global-nlinum-mode t))
</pre>
</div>
</div>
</div>
</div>



<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Evil Mode</h2>
<div class="outline-text-2" id="text-5">
<p>
After several iterations of
switching back and forth from Emacs and Vim, I gave Evil a go.
It worked great for a while, but in the end it was just more hassle
than it's worth, the reason being that key-binds in Emacs
and its many modes are not designed with modal input in mind.
</p>

<p>
Thus, it became a hassle to define new keys,
especially when I wanted to enable keys only for
insert mode only for certain key-maps. I can't find a good solution
for this, so I turned off <code>evil-mode</code> for the time being.
</p>

<p>
But my old <code>evil-mode</code> customizations are still useful
if I ever wanted to come back to it, so I include them here.
</p>
</div>
<div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> <span class="todo TODO">TODO</span> Include evil mode stuff</h3>
<div class="outline-text-3" id="text-5-1">
<p>
I need to figure out a way to reference (and attach?) files
to an org document.
</p>
</div>
</div>
</div>



<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> Yasnippet</h2>
<div class="outline-text-2" id="text-6">
<p>
Yasnippet is generally useful, except that it takes over
the <code>TAB</code> key, which performs crucial functions in Org mode and
CDLaTeX.
</p>

<p>
It seems that <code>C-;</code> is unused in both modes, so we will just map the
key to that. There is no reason to load <code>yasnippet</code> until we expand
or a create a snippet, defer loading using <code>:commands</code>.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #F9D339; font-weight: bold;">use-package</span> <span style="color: #F77669;">yasnippet</span>
    <span style="color: #CDD3D3; font-weight: bold;">:ensure</span> t
    <span style="color: #CDD3D3; font-weight: bold;">:commands</span> (yas-expand yas-new-snippet yas-visit-snippet-file)
    <span style="color: #CDD3D3; font-weight: bold;">:config</span>
    (<span style="color: #F9D339; font-weight: bold;">progn</span>
      (yas-global-mode)
      (define-key yas-minor-mode-map (kbd <span style="color: #74CBC4;">"&lt;tab&gt;"</span>) nil)
      (define-key yas-minor-mode-map (kbd <span style="color: #74CBC4;">"TAB"</span>) nil)
      (define-key yas-minor-mode-map (kbd <span style="color: #74CBC4;">"C-;"</span>) 'yas-expand)))
</pre>
</div>
</div>

<div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1"><span class="section-number-3">6.1</span> <span class="todo TODO">TODO</span> Add different folders for different modes of snippet files</h3>
</div>

<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2"><span class="section-number-3">6.2</span> <span class="todo TODO">TODO</span> Add a shortcut for visiting snippet</h3>
</div>

<div id="outline-container-sec-6-3" class="outline-3">
<h3 id="sec-6-3"><span class="section-number-3">6.3</span> <span class="todo TODO">TODO</span> Add a shortcut for creating a snippet.</h3>
</div>
</div>


<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> Smartparens</h2>
<div class="outline-text-2" id="text-7">
<p>
<code>Smartparens</code> is almost a necessity in C-like languages; it is less
essentially useless in Lisps because we will be using <code>paredit</code>. Also,
smartparens is kind of useful in (La)TeX mode, so we should turn it on
there in addition to Org mode.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #F9D339; font-weight: bold;">use-package</span> <span style="color: #F77669;">smartparens-config</span>
    <span style="color: #CDD3D3; font-weight: bold;">:ensure</span> smartparens
    <span style="color: #CDD3D3; font-weight: bold;">:init</span>
    <span style="color: #CDD3D3; font-weight: bold;">:config</span>
    (<span style="color: #F9D339; font-weight: bold;">progn</span>
      (smartparens-global-mode)
      (add-hook 'emacs-lisp-mode-hook 'turn-off-smartparens-mode)
      <span style="color: #546D7A;">;; </span><span style="color: #546D7A;">Some LaTeX specific smartparens</span>
      ))
</pre>
</div>
</div>
</div>


<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> Org Mode</h2>
<div class="outline-text-2" id="text-8">
</div><div id="outline-container-sec-8-1" class="outline-3">
<h3 id="sec-8-1"><span class="section-number-3">8.1</span> Appearance</h3>
<div class="outline-text-3" id="text-8-1">
<p>
Since we use Org Babel so often, it is important to highlight
code in source blocks.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-src-fontify-natively t)
</pre>
</div>

<p>
Fontify the whole heading to make it look nice.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-fontify-whole-heading-line t)
</pre>
</div>
</div>
</div>


<div id="outline-container-sec-8-2" class="outline-3">
<h3 id="sec-8-2"><span class="section-number-3">8.2</span> Editing features</h3>
<div class="outline-text-3" id="text-8-2">
<p>
We can also allow plain lists starting with alphabet instead
of just numbers.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-list-allow-alphabetical t)
</pre>
</div>

<p>
Let's be smart about invisible edits.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-catch-invisible-edits 'smart)
</pre>
</div>
</div>
</div>


<div id="outline-container-sec-8-3" class="outline-3">
<h3 id="sec-8-3"><span class="section-number-3">8.3</span> Directory structure</h3>
<div class="outline-text-3" id="text-8-3">
<p>
Set the <b>default directory</b> for Org-mode.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #F9D339; font-weight: bold;">let</span> ((org-folder
       (file-name-as-directory (concat user-dropbox-folder <span style="color: #74CBC4;">"ORG"</span>))))
  (setq org-directory org-folder))
</pre>
</div>
</div>
</div>


<div id="outline-container-sec-8-4" class="outline-3">
<h3 id="sec-8-4"><span class="section-number-3">8.4</span> Custom key binds</h3>
<div class="outline-text-3" id="text-8-4">
<p>
Set the global hotkeys which are commended in the manual.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #74CBC4;">"C-c l"</span>) 'org-store-link)
(global-set-key (kbd <span style="color: #74CBC4;">"C-c a"</span>) 'org-agenda)
(global-set-key (kbd <span style="color: #74CBC4;">"C-c c"</span>) 'org-capture)
(global-set-key (kbd <span style="color: #74CBC4;">"C-c b"</span>) 'org-iswitchb)
</pre>
</div>

<p>
We need an easier key on LaTeX. In future Org versions, use
<code>org-toggle-latex-fragment</code>.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(org-defkey org-mode-map (kbd <span style="color: #74CBC4;">"C-."</span>) 'org-preview-latex-fragment)
</pre>
</div>
</div>
</div>


<div id="outline-container-sec-8-5" class="outline-3">
<h3 id="sec-8-5"><span class="section-number-3">8.5</span> Support for LaTeX in Org</h3>
<div class="outline-text-3" id="text-8-5">
</div><div id="outline-container-sec-8-5-1" class="outline-4">
<h4 id="sec-8-5-1"><span class="section-number-4">8.5.1</span> Inside Org Mode</h4>
<div class="outline-text-4" id="text-8-5-1">
<p>
Larger LaTeX fonts; it seems that 1.4 is too large, so let's leave this
<b>OFF</b> for now.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(plist-put org-format-latex-options <span style="color: #CDD3D3; font-weight: bold;">:scale</span> 1.4)
(plist-put org-format-latex-options <span style="color: #CDD3D3; font-weight: bold;">:html-scale</span> 1.4)
</pre>
</div>

<p>
Autoload CDLaTeX mode.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'org-mode-hook 'turn-on-org-cdlatex)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-5-2" class="outline-4">
<h4 id="sec-8-5-2"><span class="section-number-4">8.5.2</span> Exporting to LaTeX</h4>
<div class="outline-text-4" id="text-8-5-2">
<p>
First, set up the right margins and use AMSLaTeX.
</p>
</div>
<ol class="org-ol"><li><a id="sec-8-5-2-1" name="sec-8-5-2-1"></a>Colors in exported code blocks.<br  /><div class="outline-text-5" id="text-8-5-2-1">
<p>
Perhaps <code>minted</code> is the better choice, but there are apparently "repercussions"
that I don't want to deal with, as outlined in the documentation
of <code>org-latex-listings</code>.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-latex-listings 'minted)
(<span style="color: #F9D339; font-weight: bold;">require</span> '<span style="color: #F77669;">ox-latex</span>)
(add-to-list 'org-latex-packages-alist '(<span style="color: #74CBC4;">""</span> <span style="color: #74CBC4;">"minted"</span>))
(setq org-latex-pdf-process
      '(<span style="color: #74CBC4;">"pdflatex -interaction nonstopmode -output-directory -shell-escape %o %f"</span>
       <span style="color: #74CBC4;">"pdflatex -interaction nonstopmode -output-directory -shell-escape %o %f"</span>
       <span style="color: #74CBC4;">"pdflatex -interaction nonstopmode -output-directory -shell-escape %o %f"</span>))
</pre>
</div>
</div>
</li>

<li><a id="sec-8-5-2-2" name="sec-8-5-2-2"></a><span class="todo TODO">TODO</span> Insert the appropriate packages<br  /><div class="outline-text-5" id="text-8-5-2-2">
<ul class="org-ul">
<li>geometry
</li>
<li>enumitem
</li>
<li>mathtools
</li>
<li>microtype?
</li>
</ul>
</div>
</li>
<li><a id="sec-8-5-2-3" name="sec-8-5-2-3"></a><span class="todo TODO">TODO</span> choose a set of fonts?<br  /></li>
<li><a id="sec-8-5-2-4" name="sec-8-5-2-4"></a><span class="todo TODO">TODO</span> Need to configure how the title looks<br  /></li></ol>
</div>
</div>
</div>


<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> Emacs-Lisp</h2>
<div class="outline-text-2" id="text-9">
<p>
Use CL lisp indent; it seems preferable in these <code>use-package</code>
macros.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq lisp-indent-function 'common-lisp-indent-function)
</pre>
</div>


<div class="org-src-container">

<pre class="src src-c"><span style="color: #82B1FF;">int</span> <span style="color: #FF516D;">main</span>(<span style="color: #82B1FF;">int</span> <span style="color: #C2E982;">argc</span>, <span style="color: #82B1FF;">char</span>** <span style="color: #C2E982;">argv</span>) {
    <span style="color: #F9D339; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>


<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><span class="section-number-2">10</span> LaTeX</h2>
</div>


<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11"><span class="section-number-2">11</span> Clojure</h2>
</div>


<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12"><span class="section-number-2">12</span> Epilog</h2>
<div class="outline-text-2" id="text-12">
<p>
Some Org mode related settings to to faciliate editting of this file.
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: August 2015</p>
<p class="author">Author: Kevin Li</p>
<p class="date">Created: 2015-08-20 Thu 11:23</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.5.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
